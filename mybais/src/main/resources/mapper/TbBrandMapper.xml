<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//com.gsk.mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gsk.mybatis.mapper.TbBrandMapper">


    <sql id="Base_Column_List">
            id,
            `name`,
            image,
            letter
    </sql>
    <resultMap id="BaseResultMap" type="com.gsk.mybatis.com.gsk.pojo.pojo.TbBrand">
        <result column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="image" property="image"/>
        <result column="letter" property="letter"/>
    </resultMap>
    <resultMap id="BrandLeftJoinCategory" type="BrandLeftJoinCategory">
        <id column="tb_brand_id" property="id"/>
        <result column="tb_brand_name" property="name"/>
        <result column="tb_brand_image" property="image"/>
        <result column="tb_brand_letter" property="letter"/>
        <collection property="categoryList" ofType="com.gsk.mybatis.com.gsk.pojo.pojo.TbCategory" columnPrefix="tb_category_">
            <id column="id" property="id"/>
            <result column="name" property="name"/>
            <result column="parent_id" property="parentId"/>
            <result column="is_parent" property="isParent"/>
            <result column="sort" property="sort"/>
        </collection>
    </resultMap>

<!--auto generated by MybatisCodeHelper on 2020-05-05-->
    <select id="findByIdOrderByImage" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from tb_brand
        where id=#{id} order by image asc
    </select>
    <select id="brandJoinCategory" resultMap="BrandLeftJoinCategory">
    SELECT tb_brand.id           as tb_brand_id,
           tb_brand.name         as tb_brand_name,
           tb_brand.image        as tb_brand_image,
           tb_brand.letter       as tb_brand_letter,
           tb_category.id        as tb_category_id,
           tb_category.name      as tb_category_name,
           tb_category.parent_id as tb_category_parent_id,
           tb_category.is_parent as tb_category_is_parent,
           tb_category.sort      as tb_category_sort
    FROM tb_brand
             LEFT JOIN tb_category_brand on tb_brand.id = tb_category_brand.brand_id
             LEFT JOIN tb_category ON tb_category_brand.category_id = tb_category.id

    </select>




</mapper>